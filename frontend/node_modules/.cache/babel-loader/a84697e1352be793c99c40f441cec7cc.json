{"remainingRequest":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\src\\views\\Reader.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\src\\views\\Reader.vue","mtime":1627551125785},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0ICogYXMgUERGSlMgZnJvbSAicGRmanMtZGlzdC93ZWJwYWNrIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSZWFkZXIiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1dWlkOiAiIiwKICAgICAgcGRmX3VybDogIiIsCiAgICAgIHBkZl9kb2M6IG51bGwsCiAgICAgIHBhZ2VOdW06IDAsCiAgICAgIGh1YW5nZGluZ2ppYW5nMTogIiIsCiAgICAgIGh1YW5nZGluZ2ppYW5nMjogIiIsCiAgICAgIHpob3V6aGlodWE6ICIiCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMudXVpZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnV1aWQ7CiAgICB0aGlzLnBkZl91cmwgPSB0aGlzLmdldEhvc3RVcmwoKSArICI6NTAwMC9maWxlL2dldF9wZGY/Ym9va19pZD0iICsgdGhpcy51dWlkOwogICAgdGhpcy5sb2FkUGRmKHRoaXMucGRmX3VybCk7CiAgICB0aGlzLnpob3V6aGlodWEgPSB0aGlzLmdldEhvc3RVcmwoKSArICI6NTAwMC90ZXN0L2RlbW9faW1nP3BpY19uYW1lPXpob3V6aGlodWEiOwogICAgdGhpcy5odWFuZ2RpbmdqaWFuZzEgPSB0aGlzLmdldEhvc3RVcmwoKSArICI6NTAwMC90ZXN0L2RlbW9faW1nP3BpY19uYW1lPWh1YW5nZGluZ2ppYW5nMSI7CiAgICB0aGlzLmh1YW5nZGluZ2ppYW5nMiA9IHRoaXMuZ2V0SG9zdFVybCgpICsgIjo1MDAwL3Rlc3QvZGVtb19pbWc/cGljX25hbWU9aHVhbmdkaW5namlhbmcyIjsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEhvc3RVcmw6IGZ1bmN0aW9uIGdldEhvc3RVcmwoKSB7CiAgICAgIHZhciBmdWxsX3BhdGggPSB3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24uaHJlZjsKICAgICAgdmFyIHByb3RvY29sX2luZGV4ID0gZnVsbF9wYXRoLmluZGV4T2YoIjovLyIpOwogICAgICB2YXIgcHJvdG9jb2xfc3RyID0gZnVsbF9wYXRoLnN1YnN0cmluZygwLCBwcm90b2NvbF9pbmRleCk7CiAgICAgIHZhciBmdWxsX3BhdGhfc3RyaXBwZWQgPSBmdWxsX3BhdGguc3Vic3RyaW5nKHByb3RvY29sX2luZGV4ICsgMyk7CiAgICAgIHZhciByb3V0ZXJfcGF0aCA9IHRoaXMuJHJvdXRlLnBhdGg7CiAgICAgIHZhciBob3N0X2luZGV4ID0gZnVsbF9wYXRoX3N0cmlwcGVkLmluZGV4T2Yocm91dGVyX3BhdGgpOwogICAgICB2YXIgZnVsbF9ob3N0ID0gZnVsbF9wYXRoX3N0cmlwcGVkLnN1YnN0cmluZygwLCBob3N0X2luZGV4KTsKICAgICAgY29uc29sZS5sb2coZnVsbF9wYXRoKTsKICAgICAgdmFyIHByZWRfaW5kZXggPSBmdWxsX2hvc3QubGFzdEluZGV4T2YoIjoiKTsKICAgICAgdmFyIHB1cmVfaG9zdCA9IGZ1bGxfaG9zdC5zdWJzdHJpbmcoMCwgcHJlZF9pbmRleCk7CiAgICAgIHJldHVybiBwcm90b2NvbF9zdHIgKyAiOi8vIiArIHB1cmVfaG9zdDsKICAgIH0sCiAgICBsb2FkUGRmOiBmdW5jdGlvbiBsb2FkUGRmKHBkZl91cmwpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICBQREZKUy5nZXREb2N1bWVudChwZGZfdXJsKS5wcm9taXNlLnRoZW4oZnVuY3Rpb24gKHBkZikgewogICAgICAgIHRoYXQucGRmX2RvYyA9IHBkZjsKICAgICAgICB0aGF0LnBhZ2VOdW0gPSBwZGYubnVtUGFnZXM7CiAgICAgICAgdGhhdC4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhhdC5yZW5kZXJQYWdlKDEpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICByZW5kZXJQYWdlOiBmdW5jdGlvbiByZW5kZXJQYWdlKHBhZ2VfbnVtKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhpcy5wZGZfZG9jLmdldFBhZ2UocGFnZV9udW0pLnRoZW4oZnVuY3Rpb24gKHBhZ2UpIHsKICAgICAgICB2YXIgc2NhbGUgPSAxLjU7CiAgICAgICAgdmFyIHZpZXdwb3J0ID0gcGFnZS5nZXRWaWV3cG9ydCh7CiAgICAgICAgICBzY2FsZTogc2NhbGUKICAgICAgICB9KTsKICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhcyIgKyBwYWdlX251bSk7CiAgICAgICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgICBjYW52YXMuaGVpZ2h0ID0gdmlld3BvcnQuaGVpZ2h0OwogICAgICAgIGNhbnZhcy53aWR0aCA9IHZpZXdwb3J0LndpZHRoOwogICAgICAgIHZhciByZW5kZXJDb250ZXh0ID0gewogICAgICAgICAgY2FudmFzQ29udGV4dDogY29udGV4dCwKICAgICAgICAgIHZpZXdwb3J0OiB2aWV3cG9ydAogICAgICAgIH07CiAgICAgICAgcGFnZS5yZW5kZXIocmVuZGVyQ29udGV4dCk7CiAgICAgICAgY29uc29sZS5sb2cocGFnZV9udW0pOwoKICAgICAgICBpZiAodGhhdC5wYWdlTnVtID4gcGFnZV9udW0pIHsKICAgICAgICAgIHRoYXQucmVuZGVyUGFnZShwYWdlX251bSArIDEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Reader.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <b-container>\r\n    <b-row>\r\n      <b-col ref=\"main_reader\" cols=\"8\">\r\n        <!-- <canvas\r\n          v-for=\"page in pageNum\"\r\n          :id=\"'canvas' + page\"\r\n          :key=\"page\"\r\n        ></canvas> -->\r\n        <b-container>\r\n          <b-row>\r\n            <img :src=\"zhouzhihua\" />\r\n          </b-row>\r\n        </b-container>\r\n      </b-col>\r\n      <b-col ref=\"ref_reader\" cols=\"5\">\r\n        <b-container>\r\n          <b-row>\r\n            <img :src=\"huangdingjiang1\" />\r\n          </b-row>\r\n          <b-row>\r\n            <img :src=\"huangdingjiang2\" />\r\n          </b-row>\r\n        </b-container>\r\n      </b-col>\r\n    </b-row>\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\nimport * as PDFJS from \"pdfjs-dist/webpack\";\r\n\r\nexport default {\r\n  name: \"Reader\",\r\n  data() {\r\n    return {\r\n      uuid: \"\",\r\n      pdf_url: \"\",\r\n      pdf_doc: null,\r\n      pageNum: 0,\r\n      huangdingjiang1: \"\",\r\n      huangdingjiang2: \"\",\r\n      zhouzhihua: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.uuid = this.$route.query.uuid;\r\n    this.pdf_url =\r\n      this.getHostUrl() + \":5000/file/get_pdf?book_id=\" + this.uuid;\r\n    this.loadPdf(this.pdf_url);\r\n    this.zhouzhihua =\r\n      this.getHostUrl() + \":5000/test/demo_img?pic_name=zhouzhihua\";\r\n    this.huangdingjiang1 =\r\n      this.getHostUrl() + \":5000/test/demo_img?pic_name=huangdingjiang1\";\r\n    this.huangdingjiang2 =\r\n      this.getHostUrl() + \":5000/test/demo_img?pic_name=huangdingjiang2\";\r\n  },\r\n  methods: {\r\n    getHostUrl() {\r\n      let full_path = window.document.location.href;\r\n      let protocol_index = full_path.indexOf(\"://\");\r\n      let protocol_str = full_path.substring(0, protocol_index);\r\n      let full_path_stripped = full_path.substring(protocol_index + 3);\r\n      let router_path = this.$route.path;\r\n      let host_index = full_path_stripped.indexOf(router_path);\r\n      let full_host = full_path_stripped.substring(0, host_index);\r\n      console.log(full_path);\r\n      let pred_index = full_host.lastIndexOf(\":\");\r\n      let pure_host = full_host.substring(0, pred_index);\r\n      return protocol_str + \"://\" + pure_host;\r\n    },\r\n    loadPdf(pdf_url) {\r\n      let that = this;\r\n      PDFJS.getDocument(pdf_url).promise.then((pdf) => {\r\n        that.pdf_doc = pdf;\r\n        that.pageNum = pdf.numPages;\r\n        that.$nextTick(() => {\r\n          that.renderPage(1);\r\n        });\r\n      });\r\n    },\r\n    renderPage(page_num) {\r\n      let that = this;\r\n      this.pdf_doc.getPage(page_num).then((page) => {\r\n        var scale = 1.5;\r\n        var viewport = page.getViewport({ scale: scale });\r\n        var canvas = document.getElementById(\"canvas\" + page_num);\r\n        var context = canvas.getContext(\"2d\");\r\n        canvas.height = viewport.height;\r\n        canvas.width = viewport.width;\r\n        var renderContext = {\r\n          canvasContext: context,\r\n          viewport: viewport,\r\n        };\r\n        page.render(renderContext);\r\n        console.log(page_num);\r\n\r\n        if (that.pageNum > page_num) {\r\n          that.renderPage(page_num + 1);\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n"],"sourceRoot":"src/views"}]}