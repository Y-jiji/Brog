{"remainingRequest":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\src\\components\\ShelfPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\src\\components\\ShelfPage.vue","mtime":1627179336571},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU2hlbGZQYWdlJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYm9va19saXN0OiBbewogICAgICAgIHV1aWQ6IDEsCiAgICAgICAgbmFtZTogIjEyMzQiCiAgICAgIH0sIHsKICAgICAgICB1dWlkOiAyLAogICAgICAgIG5hbWU6ICI1Njc4IgogICAgICB9LCB7CiAgICAgICAgdXVpZDogMywKICAgICAgICBuYW1lOiAiMjM1MSIKICAgICAgfV0KICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRCb29rQ29sbGVjdGlvbnMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldEhvc3RVcmw6IGZ1bmN0aW9uIGdldEhvc3RVcmwoKSB7CiAgICAgIHZhciBmdWxsX3BhdGggPSB3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24uaHJlZjsKICAgICAgdmFyIHByb3RvY29sX2luZGV4ID0gZnVsbF9wYXRoLmluZGV4T2YoIjovLyIpOwogICAgICB2YXIgcHJvdG9jb2xfc3RyID0gZnVsbF9wYXRoLnN1YnN0cmluZygwLCBwcm90b2NvbF9pbmRleCk7CiAgICAgIHZhciBmdWxsX3BhdGhfc3RyaXBwZWQgPSBmdWxsX3BhdGguc3Vic3RyaW5nKHByb3RvY29sX2luZGV4ICsgMyk7CiAgICAgIHZhciByb3V0ZXJfcGF0aCA9IHRoaXMuJHJvdXRlLnBhdGg7CiAgICAgIHZhciBob3N0X2luZGV4ID0gZnVsbF9wYXRoX3N0cmlwcGVkLmluZGV4T2Yocm91dGVyX3BhdGgpOwogICAgICB2YXIgZnVsbF9ob3N0ID0gZnVsbF9wYXRoX3N0cmlwcGVkLnN1YnN0cmluZygwLCBob3N0X2luZGV4KTsKICAgICAgY29uc29sZS5sb2coZnVsbF9wYXRoKTsKICAgICAgdmFyIHByZWRfaW5kZXggPSBmdWxsX2hvc3QubGFzdEluZGV4T2YoIjoiKTsKICAgICAgdmFyIHB1cmVfaG9zdCA9IGZ1bGxfaG9zdC5zdWJzdHJpbmcoMCwgcHJlZF9pbmRleCk7CiAgICAgIHJldHVybiBwcm90b2NvbF9zdHIgKyAiOi8vIiArIHB1cmVfaG9zdDsKICAgIH0sCiAgICBnZXRCb29rQ29sbGVjdGlvbnM6IGZ1bmN0aW9uIGdldEJvb2tDb2xsZWN0aW9ucygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB1cmwgPSB0aGlzLmdldEhvc3RVcmwoKSArICI6NTAwMC9maWxlL2xpc3RfY29sbGVjdGlvbiI7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICB2YXIgYm9va19saXN0X3RtcCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICBib29rX2xpc3RfdG1wLmZvckVhY2goZnVuY3Rpb24gKGJvb2spIHsKICAgICAgICAgICAgX3RoaXMuYm9va19saXN0LnB1c2goewogICAgICAgICAgICAgIHV1aWQ6IGJvb2suaWQsCiAgICAgICAgICAgICAgbmFtZTogYm9vay5maWxlbmFtZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBvbkFkZEJvb2s6IGZ1bmN0aW9uIG9uQWRkQm9vaygpIHsKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgJ2NvbW11bml0eScpOwogICAgfSwKICAgIG9uUmVhZGluZ0Jvb2s6IGZ1bmN0aW9uIG9uUmVhZGluZ0Jvb2soaW5kZXgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvcmVhZGVyJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgdXVpZDogdGhpcy5ib29rX2xpc3RbaW5kZXhdLnV1aWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["ShelfPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,CACA;AACA,QAAA,IAAA,EAAA,CADA;AAEA,QAAA,IAAA,EAAA;AAFA,OADA,EAKA;AACA,QAAA,IAAA,EAAA,CADA;AAEA,QAAA,IAAA,EAAA;AAFA,OALA,EASA;AACA,QAAA,IAAA,EAAA,CADA;AAEA,QAAA,IAAA,EAAA;AAFA,OATA;AADA,KAAA;AAgBA,GAnBA;AAoBA,EAAA,OApBA,qBAoBA;AACA,SAAA,kBAAA;AACA,GAtBA;AAuBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,UAAA,SAAA,GAAA,MAAA,CAAA,QAAA,CAAA,QAAA,CAAA,IAAA;AACA,UAAA,cAAA,GAAA,SAAA,CAAA,OAAA,CAAA,KAAA,CAAA;AACA,UAAA,YAAA,GAAA,SAAA,CAAA,SAAA,CAAA,CAAA,EAAA,cAAA,CAAA;AACA,UAAA,kBAAA,GAAA,SAAA,CAAA,SAAA,CAAA,cAAA,GAAA,CAAA,CAAA;AACA,UAAA,WAAA,GAAA,KAAA,MAAA,CAAA,IAAA;AACA,UAAA,UAAA,GAAA,kBAAA,CAAA,OAAA,CAAA,WAAA,CAAA;AACA,UAAA,SAAA,GAAA,kBAAA,CAAA,SAAA,CAAA,CAAA,EAAA,UAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,SAAA;AACA,UAAA,UAAA,GAAA,SAAA,CAAA,WAAA,CAAA,GAAA,CAAA;AACA,UAAA,SAAA,GAAA,SAAA,CAAA,SAAA,CAAA,CAAA,EAAA,UAAA,CAAA;AACA,aAAA,YAAA,GAAA,KAAA,GAAA,SAAA;AACA,KAbA;AAcA,IAAA,kBAdA,gCAcA;AAAA;;AACA,UAAA,GAAA,GAAA,KAAA,UAAA,KAAA,4BAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,IAAA,QAAA,CAAA,MAAA,IAAA,GAAA,EAAA;AACA,cAAA,aAAA,GAAA,QAAA,CAAA,IAAA;AACA,UAAA,aAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,KAAA,CAAA,SAAA,CAAA,IAAA,CAAA;AACA,cAAA,IAAA,EAAA,IAAA,CAAA,EADA;AAEA,cAAA,IAAA,EAAA,IAAA,CAAA;AAFA,aAAA;AAIA,WALA;AAMA;AACA,OAVA,EAWA,KAXA,CAWA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,OAbA;AAcA,KA9BA;AA+BA,IAAA,SA/BA,uBA+BA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,WAAA;AACA,KAjCA;AAkCA,IAAA,aAlCA,yBAkCA,KAlCA,EAkCA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,SAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,IAAA,EAAA,KAAA,SAAA,CAAA,KAAA,EAAA;AAAA;AAAA,OAAA;AACA;AApCA;AAvBA,CAAA","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h3>我的书架</h3>\r\n    <b-button @click=\"onAddBook\" variant=\"outline-success\">添加书籍</b-button>\r\n    <div class=\"row row-cols-3\" style=\"margin-top: 3%\">\r\n      <div class=\"container\" v-for=\"(book_item, index) in book_list\" :key=\"book_item.name\">\r\n        <b-card>\r\n          <h3>{{book_item.name}}</h3>\r\n          <b-button @click=\"onReadingBook(index)\" variant=\"outline-primary\">进入阅读</b-button>\r\n        </b-card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ShelfPage',\r\n  data() {\r\n    return{\r\n      book_list: [\r\n        {\r\n          uuid: 1,\r\n          name: \"1234\"\r\n        },\r\n        {\r\n          uuid: 2,\r\n          name: \"5678\"\r\n        },\r\n        {\r\n          uuid: 3,\r\n          name: \"2351\"\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  mounted(){\r\n    this.getBookCollections();\r\n  },\r\n  methods: {\r\n    getHostUrl(){\r\n      let full_path = window.document.location.href;\r\n      let protocol_index = full_path.indexOf(\"://\");\r\n      let protocol_str = full_path.substring(0, protocol_index);\r\n      let full_path_stripped = full_path.substring(protocol_index + 3);\r\n      let router_path =  this.$route.path;\r\n      let host_index = full_path_stripped.indexOf(router_path);\r\n      let full_host = full_path_stripped.substring(0, host_index);\r\n      console.log(full_path);\r\n      let pred_index = full_host.lastIndexOf(\":\");\r\n      let pure_host = full_host.substring(0, pred_index);\r\n      return protocol_str + \"://\" + pure_host;\r\n    },\r\n    getBookCollections(){\r\n      var url = this.getHostUrl() + \":5000/file/list_collection\";\r\n      this.axios.get(url).then((response) => {\r\n        if(response.data && response.status == 200){\r\n          var book_list_tmp = response.data;\r\n          book_list_tmp.forEach((book) => {\r\n            this.book_list.push({\r\n              uuid: book.id,\r\n              name: book.filename\r\n            });\r\n          });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n    },\r\n    onAddBook(){\r\n      this.$emit('change', 'community');\r\n    },\r\n    onReadingBook(index){\r\n      this.$router.push({path: '/reader', query: {uuid: this.book_list[index].uuid}});\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/components"}]}