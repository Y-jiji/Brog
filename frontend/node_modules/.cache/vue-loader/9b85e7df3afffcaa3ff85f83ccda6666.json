{"remainingRequest":"E:\\2021spring\\summer-designthinking\\project\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\2021spring\\summer-designthinking\\project\\CKAS\\frontend\\src\\views\\Reader.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\2021spring\\summer-designthinking\\project\\CKAS\\frontend\\src\\views\\Reader.vue","mtime":1629383640480},{"path":"E:\\2021spring\\summer-designthinking\\project\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\2021spring\\summer-designthinking\\project\\CKAS\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\2021spring\\summer-designthinking\\project\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\2021spring\\summer-designthinking\\project\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBAIGlzIGFuIGFsaWFzIHRvIC9zcmMNCmltcG9ydCBNeVJlYWRlciBmcm9tICdAL2NvbXBvbmVudHMvTXlSZWFkZXIudnVlJw0KaW1wb3J0IG1kQ29udHJhY3QgZnJvbSAnQC9jb21wb25lbnRzL2NvbnRyYWN0Lm1kLnZ1ZScNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnUmVhZGVyJywNCiAgY29tcG9uZW50czogew0KICAgIE15UmVhZGVyLA0KICAgIG1kQ29udHJhY3QNCiAgfSwNCiAgZGF0YTogew0KICAgIGFiYzogIiINCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGZ1bjEoKXsNCiAgICAgIHRoaXMuYWJjIA0KICAgIH0NCiAgfQ0KfQ0KPT09PT09PQ0KICA8Yi1jb250YWluZXI+DQogICAgPGItcm93Pg0KICAgICAgPGItY29sIHJlZj0ibWFpbl9yZWFkZXIiIGNvbHM9IjgiPg0KICAgICAgICA8IS0tIDxjYW52YXMNCiAgICAgICAgICB2LWZvcj0icGFnZSBpbiBwYWdlTnVtIg0KICAgICAgICAgIDppZD0iJ2NhbnZhcycgKyBwYWdlIg0KICAgICAgICAgIDprZXk9InBhZ2UiDQogICAgICAgID48L2NhbnZhcz4gLS0+DQogICAgICAgIDxiLWNvbnRhaW5lcj4NCiAgICAgICAgICA8Yi1yb3c+DQogICAgICAgICAgICA8aW1nIDpzcmM9Inpob3V6aGlodWEiIC8+DQogICAgICAgICAgPC9iLXJvdz4NCiAgICAgICAgPC9iLWNvbnRhaW5lcj4NCiAgICAgIDwvYi1jb2w+DQogICAgICA8Yi1jb2wgcmVmPSJyZWZfcmVhZGVyIiBjb2xzPSI1Ij4NCiAgICAgICAgPGItY29udGFpbmVyPg0KICAgICAgICAgIDxiLXJvdz4NCiAgICAgICAgICAgIDxpbWcgOnNyYz0iaHVhbmdkaW5namlhbmcxIiAvPg0KICAgICAgICAgIDwvYi1yb3c+DQogICAgICAgICAgPGItcm93Pg0KICAgICAgICAgICAgPGltZyA6c3JjPSJodWFuZ2RpbmdqaWFuZzIiIC8+DQogICAgICAgICAgPC9iLXJvdz4NCiAgICAgICAgPC9iLWNvbnRhaW5lcj4NCiAgICAgIDwvYi1jb2w+DQogICAgPC9iLXJvdz4NCiAgPC9iLWNvbnRhaW5lcj4NCjwvdGVtcGxhdGU+DQoNCjxzY3JpcHQ+DQppbXBvcnQgKiBhcyBQREZKUyBmcm9tICJwZGZqcy1kaXN0L3dlYnBhY2siOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJSZWFkZXIiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB1dWlkOiAiIiwNCiAgICAgIHBkZl91cmw6ICIiLA0KICAgICAgcGRmX2RvYzogbnVsbCwNCiAgICAgIHBhZ2VOdW06IDAsDQogICAgICBodWFuZ2RpbmdqaWFuZzE6ICIiLA0KICAgICAgaHVhbmdkaW5namlhbmcyOiAiIiwNCiAgICAgIHpob3V6aGlodWE6ICIiLA0KICAgIH07DQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy51dWlkID0gdGhpcy4kcm91dGUucXVlcnkudXVpZDsNCiAgICB0aGlzLnBkZl91cmwgPQ0KICAgICAgdGhpcy5nZXRIb3N0VXJsKCkgKyAiOjUwMDAvZmlsZS9nZXRfcGRmP2Jvb2tfaWQ9IiArIHRoaXMudXVpZDsNCiAgICB0aGlzLmxvYWRQZGYodGhpcy5wZGZfdXJsKTsNCiAgICB0aGlzLnpob3V6aGlodWEgPQ0KICAgICAgdGhpcy5nZXRIb3N0VXJsKCkgKyAiOjUwMDAvdGVzdC9kZW1vX2ltZz9waWNfbmFtZT16aG91emhpaHVhIjsNCiAgICB0aGlzLmh1YW5nZGluZ2ppYW5nMSA9DQogICAgICB0aGlzLmdldEhvc3RVcmwoKSArICI6NTAwMC90ZXN0L2RlbW9faW1nP3BpY19uYW1lPWh1YW5nZGluZ2ppYW5nMSI7DQogICAgdGhpcy5odWFuZ2RpbmdqaWFuZzIgPQ0KICAgICAgdGhpcy5nZXRIb3N0VXJsKCkgKyAiOjUwMDAvdGVzdC9kZW1vX2ltZz9waWNfbmFtZT1odWFuZ2RpbmdqaWFuZzIiOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0SG9zdFVybCgpIHsNCiAgICAgIGxldCBmdWxsX3BhdGggPSB3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24uaHJlZjsNCiAgICAgIGxldCBwcm90b2NvbF9pbmRleCA9IGZ1bGxfcGF0aC5pbmRleE9mKCI6Ly8iKTsNCiAgICAgIGxldCBwcm90b2NvbF9zdHIgPSBmdWxsX3BhdGguc3Vic3RyaW5nKDAsIHByb3RvY29sX2luZGV4KTsNCiAgICAgIGxldCBmdWxsX3BhdGhfc3RyaXBwZWQgPSBmdWxsX3BhdGguc3Vic3RyaW5nKHByb3RvY29sX2luZGV4ICsgMyk7DQogICAgICBsZXQgcm91dGVyX3BhdGggPSB0aGlzLiRyb3V0ZS5wYXRoOw0KICAgICAgbGV0IGhvc3RfaW5kZXggPSBmdWxsX3BhdGhfc3RyaXBwZWQuaW5kZXhPZihyb3V0ZXJfcGF0aCk7DQogICAgICBsZXQgZnVsbF9ob3N0ID0gZnVsbF9wYXRoX3N0cmlwcGVkLnN1YnN0cmluZygwLCBob3N0X2luZGV4KTsNCiAgICAgIGNvbnNvbGUubG9nKGZ1bGxfcGF0aCk7DQogICAgICBsZXQgcHJlZF9pbmRleCA9IGZ1bGxfaG9zdC5sYXN0SW5kZXhPZigiOiIpOw0KICAgICAgbGV0IHB1cmVfaG9zdCA9IGZ1bGxfaG9zdC5zdWJzdHJpbmcoMCwgcHJlZF9pbmRleCk7DQogICAgICByZXR1cm4gcHJvdG9jb2xfc3RyICsgIjovLyIgKyBwdXJlX2hvc3Q7DQogICAgfSwNCiAgICBsb2FkUGRmKHBkZl91cmwpIHsNCiAgICAgIGxldCB0aGF0ID0gdGhpczsNCiAgICAgIFBERkpTLmdldERvY3VtZW50KHBkZl91cmwpLnByb21pc2UudGhlbigocGRmKSA9PiB7DQogICAgICAgIHRoYXQucGRmX2RvYyA9IHBkZjsNCiAgICAgICAgdGhhdC5wYWdlTnVtID0gcGRmLm51bVBhZ2VzOw0KICAgICAgICB0aGF0LiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgdGhhdC5yZW5kZXJQYWdlKDEpOw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgcmVuZGVyUGFnZShwYWdlX251bSkgew0KICAgICAgbGV0IHRoYXQgPSB0aGlzOw0KICAgICAgdGhpcy5wZGZfZG9jLmdldFBhZ2UocGFnZV9udW0pLnRoZW4oKHBhZ2UpID0+IHsNCiAgICAgICAgdmFyIHNjYWxlID0gMS41Ow0KICAgICAgICB2YXIgdmlld3BvcnQgPSBwYWdlLmdldFZpZXdwb3J0KHsgc2NhbGU6IHNjYWxlIH0pOw0KICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNhbnZhcyIgKyBwYWdlX251bSk7DQogICAgICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7DQogICAgICAgIGNhbnZhcy5oZWlnaHQgPSB2aWV3cG9ydC5oZWlnaHQ7DQogICAgICAgIGNhbnZhcy53aWR0aCA9IHZpZXdwb3J0LndpZHRoOw0KICAgICAgICB2YXIgcmVuZGVyQ29udGV4dCA9IHsNCiAgICAgICAgICBjYW52YXNDb250ZXh0OiBjb250ZXh0LA0KICAgICAgICAgIHZpZXdwb3J0OiB2aWV3cG9ydCwNCiAgICAgICAgfTsNCiAgICAgICAgcGFnZS5yZW5kZXIocmVuZGVyQ29udGV4dCk7DQogICAgICAgIGNvbnNvbGUubG9nKHBhZ2VfbnVtKTsNCg0KICAgICAgICBpZiAodGhhdC5wYWdlTnVtID4gcGFnZV9udW0pIHsNCiAgICAgICAgICB0aGF0LnJlbmRlclBhZ2UocGFnZV9udW0gKyAxKTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo+Pj4+Pj4+IG1haW4NCg=="},{"version":3,"sources":["Reader.vue"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Reader.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n<<<<<<< HEAD\r\n  <div class=\"reader\">\r\n    <MyReader  msg=\"Welcome to Your Reader\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\nimport MyReader from '@/components/MyReader.vue'\r\nimport mdContract from '@/components/contract.md.vue'\r\n\r\nexport default {\r\n  name: 'Reader',\r\n  components: {\r\n    MyReader,\r\n    mdContract\r\n  },\r\n  data: {\r\n    abc: \"\"\r\n  },\r\n  methods: {\r\n    fun1(){\r\n      this.abc \r\n    }\r\n  }\r\n}\r\n=======\r\n  <b-container>\r\n    <b-row>\r\n      <b-col ref=\"main_reader\" cols=\"8\">\r\n        <!-- <canvas\r\n          v-for=\"page in pageNum\"\r\n          :id=\"'canvas' + page\"\r\n          :key=\"page\"\r\n        ></canvas> -->\r\n        <b-container>\r\n          <b-row>\r\n            <img :src=\"zhouzhihua\" />\r\n          </b-row>\r\n        </b-container>\r\n      </b-col>\r\n      <b-col ref=\"ref_reader\" cols=\"5\">\r\n        <b-container>\r\n          <b-row>\r\n            <img :src=\"huangdingjiang1\" />\r\n          </b-row>\r\n          <b-row>\r\n            <img :src=\"huangdingjiang2\" />\r\n          </b-row>\r\n        </b-container>\r\n      </b-col>\r\n    </b-row>\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\nimport * as PDFJS from \"pdfjs-dist/webpack\";\r\n\r\nexport default {\r\n  name: \"Reader\",\r\n  data() {\r\n    return {\r\n      uuid: \"\",\r\n      pdf_url: \"\",\r\n      pdf_doc: null,\r\n      pageNum: 0,\r\n      huangdingjiang1: \"\",\r\n      huangdingjiang2: \"\",\r\n      zhouzhihua: \"\",\r\n    };\r\n  },\r\n  mounted() {\r\n    this.uuid = this.$route.query.uuid;\r\n    this.pdf_url =\r\n      this.getHostUrl() + \":5000/file/get_pdf?book_id=\" + this.uuid;\r\n    this.loadPdf(this.pdf_url);\r\n    this.zhouzhihua =\r\n      this.getHostUrl() + \":5000/test/demo_img?pic_name=zhouzhihua\";\r\n    this.huangdingjiang1 =\r\n      this.getHostUrl() + \":5000/test/demo_img?pic_name=huangdingjiang1\";\r\n    this.huangdingjiang2 =\r\n      this.getHostUrl() + \":5000/test/demo_img?pic_name=huangdingjiang2\";\r\n  },\r\n  methods: {\r\n    getHostUrl() {\r\n      let full_path = window.document.location.href;\r\n      let protocol_index = full_path.indexOf(\"://\");\r\n      let protocol_str = full_path.substring(0, protocol_index);\r\n      let full_path_stripped = full_path.substring(protocol_index + 3);\r\n      let router_path = this.$route.path;\r\n      let host_index = full_path_stripped.indexOf(router_path);\r\n      let full_host = full_path_stripped.substring(0, host_index);\r\n      console.log(full_path);\r\n      let pred_index = full_host.lastIndexOf(\":\");\r\n      let pure_host = full_host.substring(0, pred_index);\r\n      return protocol_str + \"://\" + pure_host;\r\n    },\r\n    loadPdf(pdf_url) {\r\n      let that = this;\r\n      PDFJS.getDocument(pdf_url).promise.then((pdf) => {\r\n        that.pdf_doc = pdf;\r\n        that.pageNum = pdf.numPages;\r\n        that.$nextTick(() => {\r\n          that.renderPage(1);\r\n        });\r\n      });\r\n    },\r\n    renderPage(page_num) {\r\n      let that = this;\r\n      this.pdf_doc.getPage(page_num).then((page) => {\r\n        var scale = 1.5;\r\n        var viewport = page.getViewport({ scale: scale });\r\n        var canvas = document.getElementById(\"canvas\" + page_num);\r\n        var context = canvas.getContext(\"2d\");\r\n        canvas.height = viewport.height;\r\n        canvas.width = viewport.width;\r\n        var renderContext = {\r\n          canvasContext: context,\r\n          viewport: viewport,\r\n        };\r\n        page.render(renderContext);\r\n        console.log(page_num);\r\n\r\n        if (that.pageNum > page_num) {\r\n          that.renderPage(page_num + 1);\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n>>>>>>> main\r\n</script>\r\n"]}]}