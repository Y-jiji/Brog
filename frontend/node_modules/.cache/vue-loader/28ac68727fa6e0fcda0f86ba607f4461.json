{"remainingRequest":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\src\\components\\ShelfPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\src\\components\\ShelfPage.vue","mtime":1627179336571},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdTaGVsZlBhZ2UnLA0KICBkYXRhKCkgew0KICAgIHJldHVybnsNCiAgICAgIGJvb2tfbGlzdDogWw0KICAgICAgICB7DQogICAgICAgICAgdXVpZDogMSwNCiAgICAgICAgICBuYW1lOiAiMTIzNCINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHV1aWQ6IDIsDQogICAgICAgICAgbmFtZTogIjU2NzgiDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB1dWlkOiAzLA0KICAgICAgICAgIG5hbWU6ICIyMzUxIg0KICAgICAgICB9DQogICAgICBdDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCl7DQogICAgdGhpcy5nZXRCb29rQ29sbGVjdGlvbnMoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldEhvc3RVcmwoKXsNCiAgICAgIGxldCBmdWxsX3BhdGggPSB3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24uaHJlZjsNCiAgICAgIGxldCBwcm90b2NvbF9pbmRleCA9IGZ1bGxfcGF0aC5pbmRleE9mKCI6Ly8iKTsNCiAgICAgIGxldCBwcm90b2NvbF9zdHIgPSBmdWxsX3BhdGguc3Vic3RyaW5nKDAsIHByb3RvY29sX2luZGV4KTsNCiAgICAgIGxldCBmdWxsX3BhdGhfc3RyaXBwZWQgPSBmdWxsX3BhdGguc3Vic3RyaW5nKHByb3RvY29sX2luZGV4ICsgMyk7DQogICAgICBsZXQgcm91dGVyX3BhdGggPSAgdGhpcy4kcm91dGUucGF0aDsNCiAgICAgIGxldCBob3N0X2luZGV4ID0gZnVsbF9wYXRoX3N0cmlwcGVkLmluZGV4T2Yocm91dGVyX3BhdGgpOw0KICAgICAgbGV0IGZ1bGxfaG9zdCA9IGZ1bGxfcGF0aF9zdHJpcHBlZC5zdWJzdHJpbmcoMCwgaG9zdF9pbmRleCk7DQogICAgICBjb25zb2xlLmxvZyhmdWxsX3BhdGgpOw0KICAgICAgbGV0IHByZWRfaW5kZXggPSBmdWxsX2hvc3QubGFzdEluZGV4T2YoIjoiKTsNCiAgICAgIGxldCBwdXJlX2hvc3QgPSBmdWxsX2hvc3Quc3Vic3RyaW5nKDAsIHByZWRfaW5kZXgpOw0KICAgICAgcmV0dXJuIHByb3RvY29sX3N0ciArICI6Ly8iICsgcHVyZV9ob3N0Ow0KICAgIH0sDQogICAgZ2V0Qm9va0NvbGxlY3Rpb25zKCl7DQogICAgICB2YXIgdXJsID0gdGhpcy5nZXRIb3N0VXJsKCkgKyAiOjUwMDAvZmlsZS9saXN0X2NvbGxlY3Rpb24iOw0KICAgICAgdGhpcy5heGlvcy5nZXQodXJsKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICBpZihyZXNwb25zZS5kYXRhICYmIHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApew0KICAgICAgICAgIHZhciBib29rX2xpc3RfdG1wID0gcmVzcG9uc2UuZGF0YTsNCiAgICAgICAgICBib29rX2xpc3RfdG1wLmZvckVhY2goKGJvb2spID0+IHsNCiAgICAgICAgICAgIHRoaXMuYm9va19saXN0LnB1c2goew0KICAgICAgICAgICAgICB1dWlkOiBib29rLmlkLA0KICAgICAgICAgICAgICBuYW1lOiBib29rLmZpbGVuYW1lDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBvbkFkZEJvb2soKXsNCiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsICdjb21tdW5pdHknKTsNCiAgICB9LA0KICAgIG9uUmVhZGluZ0Jvb2soaW5kZXgpew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvcmVhZGVyJywgcXVlcnk6IHt1dWlkOiB0aGlzLmJvb2tfbGlzdFtpbmRleF0udXVpZH19KTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["ShelfPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ShelfPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h3>我的书架</h3>\r\n    <b-button @click=\"onAddBook\" variant=\"outline-success\">添加书籍</b-button>\r\n    <div class=\"row row-cols-3\" style=\"margin-top: 3%\">\r\n      <div class=\"container\" v-for=\"(book_item, index) in book_list\" :key=\"book_item.name\">\r\n        <b-card>\r\n          <h3>{{book_item.name}}</h3>\r\n          <b-button @click=\"onReadingBook(index)\" variant=\"outline-primary\">进入阅读</b-button>\r\n        </b-card>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ShelfPage',\r\n  data() {\r\n    return{\r\n      book_list: [\r\n        {\r\n          uuid: 1,\r\n          name: \"1234\"\r\n        },\r\n        {\r\n          uuid: 2,\r\n          name: \"5678\"\r\n        },\r\n        {\r\n          uuid: 3,\r\n          name: \"2351\"\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  mounted(){\r\n    this.getBookCollections();\r\n  },\r\n  methods: {\r\n    getHostUrl(){\r\n      let full_path = window.document.location.href;\r\n      let protocol_index = full_path.indexOf(\"://\");\r\n      let protocol_str = full_path.substring(0, protocol_index);\r\n      let full_path_stripped = full_path.substring(protocol_index + 3);\r\n      let router_path =  this.$route.path;\r\n      let host_index = full_path_stripped.indexOf(router_path);\r\n      let full_host = full_path_stripped.substring(0, host_index);\r\n      console.log(full_path);\r\n      let pred_index = full_host.lastIndexOf(\":\");\r\n      let pure_host = full_host.substring(0, pred_index);\r\n      return protocol_str + \"://\" + pure_host;\r\n    },\r\n    getBookCollections(){\r\n      var url = this.getHostUrl() + \":5000/file/list_collection\";\r\n      this.axios.get(url).then((response) => {\r\n        if(response.data && response.status == 200){\r\n          var book_list_tmp = response.data;\r\n          book_list_tmp.forEach((book) => {\r\n            this.book_list.push({\r\n              uuid: book.id,\r\n              name: book.filename\r\n            });\r\n          });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n    },\r\n    onAddBook(){\r\n      this.$emit('change', 'community');\r\n    },\r\n    onReadingBook(index){\r\n      this.$router.push({path: '/reader', query: {uuid: this.book_list[index].uuid}});\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}