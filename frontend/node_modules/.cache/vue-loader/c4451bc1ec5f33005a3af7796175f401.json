{"remainingRequest":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\src\\components\\LoginCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\src\\components\\LoginCard.vue","mtime":1627176950774},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\YangTianJi\\Desktop\\Code_Projects\\CKAS\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdMb2dpbkNhcmQnLA0KICBkYXRhKCkgew0KICAgIHJldHVybnsNCiAgICAgIGxvZ2luX2Zvcm06IHsNCiAgICAgICAgdXNlcm5hbWU6ICIiLA0KICAgICAgICBwYXNzd29yZDogIiIsDQogICAgICB9LA0KICAgICAgcmVtX2ZsYWc6IGZhbHNlDQogICAgfQ0KICB9LA0KICBtb3VudGVkKCl7DQogICAgbGV0IHVzZXJuYW1lX3RtcCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpOw0KICAgIGxldCBwYXNzd29yZF90bXAgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicGFzc3dvcmQiKTsNCiAgICBpZih1c2VybmFtZV90bXApew0KICAgICAgdGhpcy5sb2dpbl9mb3JtLnVzZXJuYW1lID0gdXNlcm5hbWVfdG1wOw0KICAgIH0NCiAgICBpZihwYXNzd29yZF90bXApew0KICAgICAgdGhpcy5sb2dpbl9mb3JtLnBhc3N3b3JkID0gcGFzc3dvcmRfdG1wOw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldEhvc3RVcmwoKXsNCiAgICAgIGxldCBmdWxsX3BhdGggPSB3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24uaHJlZjsNCiAgICAgIGxldCBwcm90b2NvbF9pbmRleCA9IGZ1bGxfcGF0aC5pbmRleE9mKCI6Ly8iKTsNCiAgICAgIGxldCBwcm90b2NvbF9zdHIgPSBmdWxsX3BhdGguc3Vic3RyaW5nKDAsIHByb3RvY29sX2luZGV4KTsNCiAgICAgIGxldCBmdWxsX3BhdGhfc3RyaXBwZWQgPSBmdWxsX3BhdGguc3Vic3RyaW5nKHByb3RvY29sX2luZGV4ICsgMyk7DQogICAgICBsZXQgcm91dGVyX3BhdGggPSAgdGhpcy4kcm91dGUucGF0aDsNCiAgICAgIGxldCBob3N0X2luZGV4ID0gZnVsbF9wYXRoX3N0cmlwcGVkLmluZGV4T2Yocm91dGVyX3BhdGgpOw0KICAgICAgbGV0IGZ1bGxfaG9zdCA9IGZ1bGxfcGF0aF9zdHJpcHBlZC5zdWJzdHJpbmcoMCwgaG9zdF9pbmRleCk7DQogICAgICBjb25zb2xlLmxvZyhmdWxsX3BhdGgpOw0KICAgICAgbGV0IHByZWRfaW5kZXggPSBmdWxsX2hvc3QubGFzdEluZGV4T2YoIjoiKTsNCiAgICAgIGxldCBwdXJlX2hvc3QgPSBmdWxsX2hvc3Quc3Vic3RyaW5nKDAsIHByZWRfaW5kZXgpOw0KICAgICAgcmV0dXJuIHByb3RvY29sX3N0ciArICI6Ly8iICsgcHVyZV9ob3N0Ow0KICAgIH0sDQogICAgb25Mb2dpbigpew0KICAgICAgbGV0IHVybCA9IHRoaXMuZ2V0SG9zdFVybCgpICsgJzo1MDAwL3VzZXIvbG9naW4vJzsNCiAgICAgIHRoaXMuYXhpb3MucG9zdCh1cmwsIHRoaXMubG9naW5fZm9ybSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgaWYocmVzcG9uc2UuZGF0YSAhPSB1bmRlZmluZWQpew0KICAgICAgICAgIGlmKHJlc3BvbnNlLmRhdGEuc3RhdHVzID09ICcyMDAnKXsNCiAgICAgICAgICAgIGlmKHRoaXMucmVtX2ZsYWcpew0KICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcm5hbWUiLCB0aGlzLmxvZ2luX2Zvcm0udXNlcm5hbWUpOw0KICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgicGFzc3dvcmQiLCB0aGlzLmxvZ2luX2Zvcm0ucGFzc3dvcmQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9kYXNoYm9hcmQnKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAganVtcFJlZ2lzdGVyKCl7DQogICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCAncmVnaXN0ZXInKTsNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["LoginCard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginCard.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <b-card border-variant=\"info\">\r\n      <h1>用户登录界面</h1>\r\n      <b-form @submit=\"onLogin\">\r\n        <b-form-group class=\"row mb-4\" id=\"group-username\" label-cols-sm=\"2\" label=\"用户名：\" label-for=\"input-username\">\r\n          <b-form-input id=\"input-username\" v-model=\"login_form.username\" placeholder=\"请输入用户名\" required></b-form-input>\r\n        </b-form-group>\r\n\r\n        <b-form-group class=\"row mb-4\" id=\"group-password\" label-cols-sm=\"2\" label=\"密码：\" label-for=\"input-password\">\r\n          <b-form-input id=\"input-password\" v-model=\"login_form.password\" placeholder=\"请输入密码\" required></b-form-input>\r\n        </b-form-group>\r\n\r\n        <b-form-checkbox v-model=\"rem_flag\" class=\"mb-3\">记住用户名和密码</b-form-checkbox>\r\n\r\n        <b-button type=\"submit\" size=\"lg\" variant=\"outline-primary\" style=\"margin-right: 50px\">登录</b-button>\r\n        <b-button @click=\"jumpRegister\" size=\"lg\" variant=\"outline-success\">注册账户</b-button>\r\n      </b-form>\r\n    </b-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'LoginCard',\r\n  data() {\r\n    return{\r\n      login_form: {\r\n        username: \"\",\r\n        password: \"\",\r\n      },\r\n      rem_flag: false\r\n    }\r\n  },\r\n  mounted(){\r\n    let username_tmp = localStorage.getItem(\"username\");\r\n    let password_tmp = localStorage.getItem(\"password\");\r\n    if(username_tmp){\r\n      this.login_form.username = username_tmp;\r\n    }\r\n    if(password_tmp){\r\n      this.login_form.password = password_tmp;\r\n    }\r\n  },\r\n  methods: {\r\n    getHostUrl(){\r\n      let full_path = window.document.location.href;\r\n      let protocol_index = full_path.indexOf(\"://\");\r\n      let protocol_str = full_path.substring(0, protocol_index);\r\n      let full_path_stripped = full_path.substring(protocol_index + 3);\r\n      let router_path =  this.$route.path;\r\n      let host_index = full_path_stripped.indexOf(router_path);\r\n      let full_host = full_path_stripped.substring(0, host_index);\r\n      console.log(full_path);\r\n      let pred_index = full_host.lastIndexOf(\":\");\r\n      let pure_host = full_host.substring(0, pred_index);\r\n      return protocol_str + \"://\" + pure_host;\r\n    },\r\n    onLogin(){\r\n      let url = this.getHostUrl() + ':5000/user/login/';\r\n      this.axios.post(url, this.login_form).then((response) => {\r\n        if(response.data != undefined){\r\n          if(response.data.status == '200'){\r\n            if(this.rem_flag){\r\n              localStorage.setItem(\"username\", this.login_form.username);\r\n              localStorage.setItem(\"password\", this.login_form.password);\r\n            }\r\n            this.$router.push('/dashboard');\r\n          }\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n    },\r\n    jumpRegister(){\r\n      this.$emit('change', 'register');\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n</style>\r\n"]}]}